/*
 * @(#)pres_psService.h    generated by: makeheader    Mon Dec  3 23:08:15 2007
 *
 *		built from:	psService.ifc
 */

#ifndef pres_psService_h
#define pres_psService_h


  #ifndef osapi_type_h
    #include "osapi/osapi_type.h"
  #endif
  #ifndef osapi_ntptime_h
    #include "osapi/osapi_ntptime.h"
  #endif
  #ifndef reda_cursor_h
    #include "reda/reda_cursor.h"
  #endif
  #ifndef reda_sequenceNumber_h
    #include "reda/reda_sequenceNumber.h"
  #endif
  #ifndef netio_common_h
    #include "netio/netio_common.h"
  #endif
  #ifndef mig_rtps_h
    #include "mig/mig_rtps.h"
  #endif
  #ifndef writer_history_interface_h
    #include "writer_history/writer_history_interface.h"
  #endif
  #ifndef pres_common_h
    #include "pres/pres_common.h"
  #endif
  #ifndef pres_participant_h
    #include "pres/pres_participant.h"
  #endif
  #ifndef pres_writerStatistics_h
    #include "pres/pres_writerStatistics.h"
  #endif
  #ifndef pres_readerStatistics_h
    #include "pres/pres_readerStatistics.h"
  #endif
  #ifndef cdr_typeCode_h
    #include "cdr/cdr_typeCode.h"
  #endif   

#ifdef __cplusplus
    extern "C" {
#endif


#define PRES_PS_UNICAST_LOCALPORT_COUNT_MAX   (2)
/*e \ingroup PRESPsServiceModule
  Upper bound limit for partitionMaximumCumulativeLength in PsServiceProperty
 */
#define PRES_PS_PARTITION_MAXIMUM_CUMULATIVE_LENGTH_LIMIT       (256)


#define PRESPsWriter PRESLocalEndpoint
#define PRESPsReader PRESLocalEndpoint

struct PRESPsSubscriptionParameter {
    /*e immutable */
    struct PRESLocatorDerivableQosPolicy unicastLocator;
    /*e immutable */
    struct PRESLocatorQosPolicy multicastLocator;

    /*e immutable. The topic of the reader. It may be ignored if topic is 
      provided from other source, e.g., topicTypeWR. */
    char *topic;
    /*e immutable. The type of the reader. It may be ignored if typeName is 
      provided from other source, e.g., topicTypeWR.  */
    char *typeName;
    
    /*e immutable */
    MIGRtpsObjectId groupOid;

    /*e immutable */
    RTIBool expectsInlineQos;

    /*e immutable. The Type Code of the reader
     */
    struct RTICdrTypeCode *typeCode;
    /*e immutable. The durability requested by the reader. */
    struct PRESDurabilityQosPolicy durabilityQosPolicy;
    /*e immutable. The reliability requested by the reader. */
    struct PRESReliabilityQosPolicy reliabilityQosPolicy;
    /*e immutable. Receiving queue size. */
    /*i For DDS, set it to the same as maximalSamplePerRemoteWriterCount */
    int recvQueueSize;
    /*e mutable. The minimum separation between two issues. Must >= 0 */
    struct RTINtpTime minimumSeparation;
    /*e immutable. See struct PRESLivelinessQosPolicy. */
    struct PRESLivelinessQosPolicy livelinessQosPolicy;
    /*e immutable. See struct PRESOwnershipQosPolicy */
    struct PRESOwnershipQosPolicy ownershipQosPolicy;
    /*e immutable. See struct PRESPresentationQosPolicy
      Caller doesn't need to fillup this field. We get this from
      group property automatically
     */
    struct PRESPresentationQosPolicy presentationQosPolicy;
    /*e immutable. See struct PRESDestinationOrderQosPolicy */
    struct PRESDestinationOrderQosPolicy destinationOrderQosPolicy;
    /*e mutable. See struct PRESDeadlineQosPolicy */
    struct PRESDeadlineQosPolicy deadlineQosPolicy;
    /*e mutable. See struct PRESLatencyBudgetQosPolicy */
    struct PRESLatencyBudgetQosPolicy latencyBudgetQosPolicy;
    /*e mutable. See struct PRESUserDataQosPolicy */
    struct PRESUserDataQosPolicy userDataQosPolicy;
    /*e mutable. See struct PRESGroupDataQosPolicy */
    struct PRESGroupDataQosPolicy groupDataQosPolicy;
    /*e mutable. See struct PRESTopicDataQosPolicy */
    struct PRESTopicDataQosPolicy topicDataQosPolicy;
    /*e mutable. See struct PRESPartitionQosPolicy */
    struct PRESPartitionQosPolicy partitionQosPolicy;
    /*e mutable. See struct PRESContentFilterProperty */
    struct PRESContentFilterProperty contentFilterProperty;
    /*e mutable. See struct PRESPropertyQosPolicy */
    struct PRESPropertyQosPolicy propertyQosPolicy;

    /*e immutable. Virtual GUID */
    struct MIGRtpsGuid virtualGuid;
    /*e immutable. Service Kind */
    struct PRESServiceQosPolicy serviceQosPolicy;
    /*e immutable */
    MIGRtpsProtocolVersion protocolVersion;
    /*e immutable */
    MIGRtpsVendorId vendorId;
    /*e immutable */
    struct PRESProductVersion productVersion;
    /*e mutable */
    RTIBool isIncompatible;
};


/*e \ingroup PRESPsServiceModule */
#define PRES_PS_SUBSCRIPTION_PARAMETER_TOPIC_DEFAULT  NULL
/*e \ingroup PRESPsServiceModule */
#define PRES_PS_SUBSCRIPTION_PARAMETER_TYPE_NAME_DEFAULT NULL
/*e \ingroup PRESPsServiceModule */
#define PRES_PS_SUBSCRIPTION_PARAMETER_DURABILITY_QOS_POLICY_DEFAULT \
    {PRES_VOLATILE_DURABILITY_QOS,RTI_TRUE}
#define PRES_PS_SUBSCRIPTION_PARAMETER_RELIABILITY_QOS_POLICY_DEFAULT { \
    PRES_BEST_EFFORT_RELIABILITY_QOS, \
    RTI_NTP_TIME_ZERO \
}
/*e \ingroup PRESPsServiceModule */
#define PRES_PS_SUBSCRIPTION_PARAMETER_RECV_QUEUE_SIZE_DEFAULT (1)
/*e \ingroup PRESPsServiceModule */
#define PRES_PS_SUBSCRIPTION_PARAMETER_MINIMUM_SEPARATION_DEFAULT {0, 0}
/*e \ingroup PRESPsServiceModule */
#define PRES_PS_SUBSCRIPTION_PARAMETER_LIVELINESS_QOS_POLICY_DEFAULT \
    {PRES_AUTOMATIC_LIVELINESS_QOS, RTI_NTP_TIME_MAX}
#define PRES_PS_SUBSCRIPTION_PARAMETER_OWNERSHIP_QOS_POLICY_DEFAULT \
    {PRES_SHARED_OWNERSHIP_QOS}
#define PRES_PS_SUBSCRIPTION_PARAMETER_PRESENTATION_QOS_POLICY_DEFAULT \
    {PRES_INSTANCE_PRESENTATION_QOS, \
    RTI_FALSE, /* coherent_access */ \
    RTI_FALSE /* ordered_access */ }
#define PRES_PS_SUBSCRIPTION_PARAMETER_DESTINATION_ORDER_QOS_POLICY_DEFAULT \
    {PRES_BY_RECEPTION_TIMESTAMP_DESTINATIONORDER_QOS, \
     PRES_INSTANCE_SCOPE_DESTINATIONORDER_QOS}
#define PRES_PS_SUBSCRIPTION_PARAMETER_DEADLINE_QOS_POLICY_DEFAULT \
    {RTI_NTP_TIME_MAX}
#define PRES_PS_SUBSCRIPTION_PARAMETER_LATENCY_BUDGET_QOS_POLICY_DEFAULT \
    {RTI_NTP_TIME_ZERO}
#define PRES_PS_SUBSCRIPTION_PARAMETER_USER_DATA_QOS_POLICY_DEFAULT \
    {{0, 0, NULL}}
#define PRES_PS_SUBSCRIPTION_PARAMETER_TOPIC_DATA_QOS_POLICY_DEFAULT \
    {{0, 0, NULL}}
#define PRES_PS_SUBSCRIPTION_PARAMETER_GROUP_DATA_QOS_POLICY_DEFAULT \
    {{0, 0, NULL}}
#define PRES_PS_SUBSCRIPTION_PARAMETER_PARTITION_QOS_POLICY_DEFAULT \
    {{0, 0, NULL}}
#define PRES_PS_SUBSCRIPTION_PARAMETER_CONTENT_FILTER_PROPERTY_DEFAULT \
    {{0, 0, NULL},NULL,NULL,NULL,NULL,NULL}
#define PRES_PS_SUBSCRIPTION_PARAMETER_PROPERTY_QOS_POLICY_DEFAULT \
    {{0, 0, NULL}}
#define PRES_PS_SUBSCRIPTION_PARAMETER_SERVICE_QOS_POLICY_DEFAULT \
    {PRES_NO_SERVICE_QOS}


  #define PRES_PS_SUBSCRIPTION_PARAMETER_DEFAULT {                        \
    PRES_LOCATOR_DERIVABLE_QOS_POLICY_DEFAULT, /* unicastLocator */       \
    PRES_LOCATOR_QOS_POLICY_DEFAULT, /* multicastLocator */               \
    PRES_PS_SUBSCRIPTION_PARAMETER_TOPIC_DEFAULT, /* topic */             \
    PRES_PS_SUBSCRIPTION_PARAMETER_TYPE_NAME_DEFAULT, /* typeName */      \
    MIG_RTPS_OBJECT_ID_UNKNOWN, /* groupOid */                            \
    RTI_FALSE, /* expectsInlineQos */                         \
    NULL, /* typeCode */                                                  \
    PRES_PS_SUBSCRIPTION_PARAMETER_DURABILITY_QOS_POLICY_DEFAULT,         \
    PRES_PS_SUBSCRIPTION_PARAMETER_RELIABILITY_QOS_POLICY_DEFAULT,        \
    PRES_PS_SUBSCRIPTION_PARAMETER_RECV_QUEUE_SIZE_DEFAULT,               \
    PRES_PS_SUBSCRIPTION_PARAMETER_MINIMUM_SEPARATION_DEFAULT,            \
    PRES_PS_SUBSCRIPTION_PARAMETER_LIVELINESS_QOS_POLICY_DEFAULT,         \
    PRES_PS_SUBSCRIPTION_PARAMETER_OWNERSHIP_QOS_POLICY_DEFAULT ,         \
    PRES_PS_SUBSCRIPTION_PARAMETER_PRESENTATION_QOS_POLICY_DEFAULT,       \
    PRES_PS_SUBSCRIPTION_PARAMETER_DESTINATION_ORDER_QOS_POLICY_DEFAULT,  \
    PRES_PS_SUBSCRIPTION_PARAMETER_DEADLINE_QOS_POLICY_DEFAULT,           \
    PRES_PS_SUBSCRIPTION_PARAMETER_LATENCY_BUDGET_QOS_POLICY_DEFAULT,     \
    PRES_PS_SUBSCRIPTION_PARAMETER_USER_DATA_QOS_POLICY_DEFAULT,          \
    PRES_PS_SUBSCRIPTION_PARAMETER_GROUP_DATA_QOS_POLICY_DEFAULT,         \
    PRES_PS_SUBSCRIPTION_PARAMETER_TOPIC_DATA_QOS_POLICY_DEFAULT,         \
    PRES_PS_SUBSCRIPTION_PARAMETER_PARTITION_QOS_POLICY_DEFAULT,          \
    PRES_PS_SUBSCRIPTION_PARAMETER_CONTENT_FILTER_PROPERTY_DEFAULT,       \
    PRES_PS_SUBSCRIPTION_PARAMETER_PROPERTY_QOS_POLICY_DEFAULT,           \
    MIG_RTPS_GUID_UNKNOWN,                                                \
    PRES_PS_SUBSCRIPTION_PARAMETER_SERVICE_QOS_POLICY_DEFAULT,            \
    MIG_RTPS_PROTOCOL_VERSION, /* protocolVersion */                      \
    MIG_RTPS_VENDOR_ID_UNKNOWN, /* vendorId */                            \
    PRES_PRODUCT_VERSION_DEFAULT, /* productVersion */                    \
    RTI_FALSE /* isIncompatible */                                        \
    }

struct PRESPsPublicationParameter {
    /*e immutable
      FIXME: also need multicastLocator, just like a subscription
    */
    struct PRESLocatorDerivableQosPolicy unicastLocator;

    /*e immutable. The topic of the writer. It may be ignored if topic is 
      provided from other source, e.g., topicTypeWR. */
    /*i
     * DDS and Presentation require this string to be immutable, the
     * former because it is initialized with a string received through
     * a public API and the latter because it provides #defines for
     * initializing them with static data. Discovery, however, needs
     * it to be mutable (although it only modifies strings that it
     * created itself). See bug #7800 for mroe discussion.
     */
    char *topic;
    
    /*e immutable. The type of the writer. It may be ignored if typeName is
     provided from other source, e.g., topicTypeWR. */
    /*i
     * DDS and Presentation require this string to be immutable, the
     * former because it is initialized with a string received through
     * a public API and the latter because it provides #defines for
     * initializing them with static data. Discovery, however, needs
     * it to be mutable (although it only modifies strings that it
     * created itself). See bug #7800 for mroe discussion.
     */
    char *typeName;    

    /*e immutable */
    MIGRtpsObjectId groupOid;
    
    /*e immutable. The Type Code of the writer
     */
    struct RTICdrTypeCode * typeCode;
        
    /*e immutable. The reliability offered by the writer. */
    struct PRESReliabilityQosPolicy reliabilityQosPolicy;
    /*e immutable. Whether the writer expects ACK. Deprecated. */
    RTIBool expectsAck;
    /*e immutable. The sending queue size of the writer. Must >= 1 */
    /*i For DDS, should set to maxSamples. */
    int sendQueueSize;
    /*e immutable. The max serialized size of a sample. Must >= 0 */
    /*i This value will be set as the output of the getMaxSizeSerializedFnc in
        the type plugin */
    int maxSampleSerializedSize;
    /*e mutable. The strength of the writer. Must >= 0. See
     struct PRESOwnershipStrengthQosPolicy */
    RTI_INT32 strength;
    /*e mutable. The persistence of the writer. */
    /*i For DDS, leave it as default */
    struct RTINtpTime persistence;
    /*e immutable. See struct PRESLivelinessQosPolicy */
    struct PRESLivelinessQosPolicy livelinessQosPolicy;
    /*e immutable. See struct PRESDurabilityQosPolicy */
    struct PRESDurabilityQosPolicy durabilityQosPolicy;
    /*e immutable. See struct PRESDurabilityServiceQosPolicy */
    struct PRESDurabilityServiceQosPolicy durabilityServiceQosPolicy;
    /*e immutable. See struct PRESOwnershipQosPolicy */
    struct PRESOwnershipQosPolicy ownershipQosPolicy;
    /*e immutable. See struct PRESPresentationQosPolicy
      Caller doesn't need to fillup this field. We get this from
      group property automatically
     */
    struct PRESPresentationQosPolicy presentationQosPolicy;
    /*e immutable. See struct PRESDestinationOrderQosPolicy */
    struct PRESDestinationOrderQosPolicy destinationOrderQosPolicy;
    /*e mutable. See struct PRESDeadlineQosPolicy */
    struct PRESDeadlineQosPolicy deadlineQosPolicy;
    /*e mutable. See struct PRESLatencyBudgetQosPolicy */
    struct PRESLatencyBudgetQosPolicy latencyBudgetQosPolicy;
    /*e mutable. See struct PRESLifespanQosPolicy */
    struct PRESLifespanQosPolicy lifespanQosPolicy;
    /*e mutable. See struct PRESUserDataQosPolicy */
    struct PRESUserDataQosPolicy userDataQosPolicy;
    /*e mutable. See struct PRESGroupDataQosPolicy */
    struct PRESGroupDataQosPolicy groupDataQosPolicy;
    /*e mutable. See struct PRESTopicDataQosPolicy */
    struct PRESTopicDataQosPolicy topicDataQosPolicy;
    /*e mutable. See struct PRESPartitionQosPolicy */
    struct PRESPartitionQosPolicy partitionQosPolicy;
    /*e mutable. See struct PRESPropertyQosPolicy */
    struct PRESPropertyQosPolicy propertyQosPolicy;

    /*e immutable. Virtual GUID */
    struct MIGRtpsGuid virtualGuid;
    /*e immutable. Service Kind */
    struct PRESServiceQosPolicy serviceQosPolicy;
    /*e immutable */
    MIGRtpsProtocolVersion protocolVersion;
    /*e immutable */
    MIGRtpsVendorId vendorId;
    /*e immutable */
    struct PRESProductVersion productVersion;
    /*e mutable */
    RTIBool isIncompatible;
};


/*e \ingroup PRESPsServiceModule */
#define PRES_PS_PUBLICATION_PARAMETER_TOPIC_DEFAULT NULL
/*e \ingroup PRESPsServiceModule */
#define PRES_PS_PUBLICATION_PARAMETER_TYPE_NAME_DEFAULT NULL
/*e \ingroup PRESPsServiceModule */
#define PRES_PS_PUBLICATION_PARAMETER_RELIABILITY_QOS_POLICY_DEFAULT { \
    PRES_BEST_EFFORT_RELIABILITY_QOS, \
    RTI_NTP_TIME_ZERO \
}
/*e \ingroup PRESPsServiceModule */
#define PRES_PS_PUBLICATION_PARAMETER_EXPECTS_ACK_DEFAULT (RTI_TRUE)
/*e \ingroup PRESPsServiceModule */
#define PRES_PS_PUBLICATION_PARAMETER_SEND_QUEUE_SIZE_DEFAULT (1)
/*e \ingroup PRESPsServiceModule */
#define PRES_PS_PUBLICATION_PARAMETER_MAX_SAMPLE_SERIALIZED_SIZE_DEFAULT (0)
/*e \ingroup PRESPsServiceModule */
#define PRES_PS_PUBLICATION_PARAMETER_STRENGTH_DEFAULT (1)
/*e \ingroup PRESPsServiceModule */
#define PRES_PS_PUBLICATION_PARAMETER_PERSISTENCE_DEFAULT {0, 0}
/*e \ingroup PRESPsServiceModule */
#define PRES_PS_PUBLICATION_PARAMETER_LIVELINESS_QOS_POLICY_DEFAULT \
    {PRES_AUTOMATIC_LIVELINESS_QOS, RTI_NTP_TIME_MAX}
#define PRES_PS_PUBLICATION_PARAMETER_DURABILITY_QOS_POLICY_DEFAULT \
    {PRES_VOLATILE_DURABILITY_QOS,RTI_TRUE}
#define PRES_PS_PUBLICATION_PARAMETER_DURABILITY_SERVICE_QOS_POLICY_DEFAULT { \
    RTI_NTP_TIME_ZERO, /* serviceCleanupDelay */ \
    {PRES_KEEP_LAST_HISTORY_QOS,PRES_NONE_REFILTER_QOS,1}, /* history */ \
    { /* resourceLimits */ \
        REDA_FAST_BUFFER_POOL_GROWTH_PROPERTY_DEFAULT, /* sampleCount */ \
        REDA_FAST_BUFFER_POOL_GROWTH_PROPERTY_DEFAULT, /* instanceCount */ \
        REDA_FAST_BUFFER_POOL_UNLIMITED /* maxSamplesPerInstance */ \
    } \
}

#define PRES_PS_PUBLICATION_PARAMETER_OWNERSHIP_QOS_POLICY_DEFAULT \
    {PRES_SHARED_OWNERSHIP_QOS}
#define PRES_PS_PUBLICATION_PARAMETER_PRESENTATION_QOS_POLICY_DEFAULT \
    {PRES_INSTANCE_PRESENTATION_QOS, \
    RTI_FALSE, /* coherent_access */ \
    RTI_FALSE /* ordered_access */ }
#define PRES_PS_PUBLICATION_PARAMETER_DESTINATION_ORDER_QOS_POLICY_DEFAULT \
    {PRES_BY_RECEPTION_TIMESTAMP_DESTINATIONORDER_QOS, \
     PRES_INSTANCE_SCOPE_DESTINATIONORDER_QOS}
#define PRES_PS_PUBLICATION_PARAMETER_DEADLINE_QOS_POLICY_DEFAULT \
    {RTI_NTP_TIME_MAX}
#define PRES_PS_PUBLICATION_PARAMETER_LATENCY_BUDGET_QOS_POLICY_DEFAULT \
    {RTI_NTP_TIME_ZERO}
#define PRES_PS_PUBLICATION_PARAMETER_LIFESPAN_QOS_POLICY_DEFAULT \
    {RTI_NTP_TIME_MAX}
#define PRES_PS_PUBLICATION_PARAMETER_USER_DATA_QOS_POLICY_DEFAULT \
    {{0, 0, NULL}}
#define PRES_PS_PUBLICATION_PARAMETER_TOPIC_DATA_QOS_POLICY_DEFAULT \
    {{0, 0, NULL}}
#define PRES_PS_PUBLICATION_PARAMETER_GROUP_DATA_QOS_POLICY_DEFAULT \
    {{0, 0, NULL}}
#define PRES_PS_PUBLICATION_PARAMETER_PARTITION_QOS_POLICY_DEFAULT \
    {{0, 0, NULL}}
#define PRES_PS_PUBLICATION_PARAMETER_PROPERTY_QOS_POLICY_DEFAULT \
    {{0, 0, NULL}}
#define PRES_PS_PUBLICATION_PARAMETER_SERVICE_QOS_POLICY_DEFAULT \
    {PRES_NO_SERVICE_QOS}



  #define PRES_PS_PUBLICATION_PARAMETER_DEFAULT {                        \
    PRES_LOCATOR_DERIVABLE_QOS_POLICY_DEFAULT,                           \
    PRES_PS_PUBLICATION_PARAMETER_TOPIC_DEFAULT, /* topic */             \
    PRES_PS_PUBLICATION_PARAMETER_TYPE_NAME_DEFAULT, /* typeName */      \
    MIG_RTPS_OBJECT_ID_UNKNOWN, /* groupOid */                           \
    NULL, /* typeCode */                                                 \
    PRES_PS_PUBLICATION_PARAMETER_RELIABILITY_QOS_POLICY_DEFAULT,        \
    PRES_PS_PUBLICATION_PARAMETER_EXPECTS_ACK_DEFAULT,                   \
    PRES_PS_PUBLICATION_PARAMETER_SEND_QUEUE_SIZE_DEFAULT,               \
    PRES_PS_PUBLICATION_PARAMETER_MAX_SAMPLE_SERIALIZED_SIZE_DEFAULT,    \
    PRES_PS_PUBLICATION_PARAMETER_STRENGTH_DEFAULT,                      \
    PRES_PS_PUBLICATION_PARAMETER_PERSISTENCE_DEFAULT,                   \
    PRES_PS_PUBLICATION_PARAMETER_LIVELINESS_QOS_POLICY_DEFAULT,         \
    PRES_PS_PUBLICATION_PARAMETER_DURABILITY_QOS_POLICY_DEFAULT,         \
    PRES_PS_PUBLICATION_PARAMETER_DURABILITY_SERVICE_QOS_POLICY_DEFAULT, \
    PRES_PS_PUBLICATION_PARAMETER_OWNERSHIP_QOS_POLICY_DEFAULT ,         \
    PRES_PS_PUBLICATION_PARAMETER_PRESENTATION_QOS_POLICY_DEFAULT,       \
    PRES_PS_PUBLICATION_PARAMETER_DESTINATION_ORDER_QOS_POLICY_DEFAULT,  \
    PRES_PS_PUBLICATION_PARAMETER_DEADLINE_QOS_POLICY_DEFAULT,           \
    PRES_PS_PUBLICATION_PARAMETER_LATENCY_BUDGET_QOS_POLICY_DEFAULT,     \
    PRES_PS_PUBLICATION_PARAMETER_LIFESPAN_QOS_POLICY_DEFAULT,           \
    PRES_PS_PUBLICATION_PARAMETER_USER_DATA_QOS_POLICY_DEFAULT,          \
    PRES_PS_PUBLICATION_PARAMETER_GROUP_DATA_QOS_POLICY_DEFAULT,         \
    PRES_PS_PUBLICATION_PARAMETER_TOPIC_DATA_QOS_POLICY_DEFAULT,         \
    PRES_PS_PUBLICATION_PARAMETER_PARTITION_QOS_POLICY_DEFAULT,          \
    PRES_PS_PUBLICATION_PARAMETER_PROPERTY_QOS_POLICY_DEFAULT,           \
    MIG_RTPS_GUID_UNKNOWN,                                               \
    PRES_PS_PUBLICATION_PARAMETER_SERVICE_QOS_POLICY_DEFAULT,            \
    MIG_RTPS_PROTOCOL_VERSION, /* protocolVersion */                     \
    MIG_RTPS_VENDOR_ID_UNKNOWN, /* vendorId */                           \
    PRES_PRODUCT_VERSION_DEFAULT, /* productVersion */                   \
    RTI_FALSE /* isIncompatible */                                       \
    }

struct PRESPsWriterResourceLimits {
    /*e immutable. The number of concurrent blocking write thread count policy.
     */
    struct REDAFastBufferPoolGrowthProperty blockingWriteThreadCount;

    /*e immutable. The maximum number of remote readers to filter for      */
    int maxRemoteReaderFilters;
};

typedef enum {
    PRES_PS_SERVICE_WRITER_PROPERTY_NORM             = 0x01,
    PRES_PS_SERVICE_WRITER_PROPERTY_ANON             = 0x02,
    PRES_PS_SERVICE_WRITER_PROPERTY_ANON_BROADCASTER = 0x04,
    PRES_PS_SERVICE_WRITER_PROPERTY_ANON_TRANSPONDER = 0x08,
    PRES_PS_SERVICE_WRITER_PROPERTY_ANON_RESPONDER   = 0x10
} PRESPsServiceWriterKind;

struct PRESPsWriterProperty {
    /*e immutable. parent proeprty. */
    struct PRESLocalEndpointProperty parent;
    /*e partly mutable. */
    struct PRESPsPublicationParameter parameter;
    /*e immutable. encodes the kind of reader.
      Can't be PRESPsServiceWriterKind because we need to support bitwise
      operation. */
    /*i For DDS, leave it as default, i.e., NORM */
    PRESPsServiceWriterKind writerKindMask;
    /*e immutable */
    struct PRESHistoryQosPolicy history;
    /*e immutable */
    struct PRESResourceLimitsQosPolicy resourceLimits;
    /*e immutable */
    struct PRESPsWriterResourceLimits writerResourceLimits;
    /*e mutable, unsupported */
    struct PRESWriterDataLifecycleQosPolicy writerDataLifecycle;
    /*e immutable. If true, dispose automatically causes unregister. Otherwise,
      user needs to call unregister explicitly. */
    /*i For DDS, leave it as default, i.e., RTI_FALSE */
    RTIBool autoUnregister;
    /*i immutable. State whether we need to match with locally created
        writers. For DDS, leave it as default, i.e., RTI_TRUE */
    RTIBool matchWithLocal;
    /*i immutable. Maximum size of the serialized user sample buffer.
        If this parameter is greater or equal to 0, getMaxSizeSerializedFnc
        method on the type plugin interface will not be called to to get
        the maximum size of the serialized user sample. This value will be
        used instead. */
    int bufferMaxSizeSerialized;
    /*i immutable. Serialize option passed to the queue. Optional. */
    void *serializeOption;
    /*i immutable. NULL means synchronously writing. */
    struct PRESFlowController *flowController;

    /*i mutable. Gather statistics when set */
    RTIBool gatherStatistics;
};


/*e \ingroup PRESPsServiceModule */
#define PRES_PS_WRITER_PROPERTY_DEFAULT {                     \
    PRES_LOCAL_ENDPOINT_PROPERTY_DEFAULT, /* parent */        \
    PRES_PS_PUBLICATION_PARAMETER_DEFAULT, /* parameter */    \
    PRES_PS_SERVICE_WRITER_PROPERTY_NORM, /* bitmap */        \
    {PRES_KEEP_LAST_HISTORY_QOS,PRES_NONE_REFILTER_QOS,1}, /* history */\
    { /* resourceLimits */ \
      {1, 4, REDA_FAST_BUFFER_POOL_UNLIMITED}, /* sampleCount */ \
      {1, 4, REDA_FAST_BUFFER_POOL_UNLIMITED}, /* instanceCount */ \
      4 /* maxSamplesPerInstance */ \
    }, \
    { /* writerResourceLimits */                    \
      {1, 4, REDA_FAST_BUFFER_POOL_UNLIMITED}, /* blockingWriteThreadCount */ \
      32 /* maxRemoteReaderFilters */ \
    }, \
    {RTI_TRUE}, /* writerDataLifecycle */                     \
    RTI_FALSE, /* autoUnregister */                           \
    RTI_TRUE, /* matchWithLocal */                            \
    -1, /* bufferMaxSizeSerialized */                         \
    NULL, /* serializeOption */                               \
    NULL, /* flowController */                                \
    RTI_FALSE /* gatherStatistics */                          \
}

struct PRESPsBeWriterProperty {
    /*e parent property */
    struct PRESPsWriterProperty parent;	
};


/*e \ingroup PRESPsServiceModule */
#define PRES_PS_BE_WRITER_PROPERTY_DEFAULT {             \
    PRES_PS_WRITER_PROPERTY_DEFAULT /* parent */         \
}


/*e \ingroup PRESPsServiceModule */
#define PRES_PS_SR_WRITER_PROPERTY_REPEAT_ANNOUNCE_PERIOD_FAST_INVALID {-1, 0}

struct PRESPsSrWriterProperty {
    /*e parent property */
    struct PRESPsWriterProperty parent;
    /*e mutable. When the number of unacknowledged samples reaches or falls
      below this number, the writer will use repeatAnnouncePeriodNorm and a
      callback will be issued. */
    int lowWaterMark;
    /*e mutable. When the number of unacknowledged samples reaches or exceeds
      this number, the writer will use repeatAnnouncePeriodFast and a
      callback will be issued.  The value 0 is not valid. */
    int highWaterMark;
    /*e mutable. The normal rate at which to announce writer's queue status, or
     ask for ack from remote reader. */
    struct RTINtpTime repeatAnnouncePeriodNorm;
    /*e mutable. The fast rate at which to announce writer's queue status, or
     ask for ack from remote reader.  The special value of
     PRES_PS_SR_WRITER_PROPERTY_REPEAT_ANNOUNCE_PERIOD_FAST_INVALID can be set
     to specify that only the normal repeat announce period should be used. */
    struct RTINtpTime repeatAnnouncePeriodFast;
    /*e mutable. The rate for late-joining readers at which to announce 
    writer's queue status, or ask for ack from remote reader. */
    struct RTINtpTime lateJoinerAnnouncePeriod;
   /*e mutable. The max number of annnounce retries before setting a remote
      reader to inactive. */
    int maxRetries;
    /*e mutable. The min delay between the time writer receives some message
      from reader and the time writer responds to that message. If it is ZERO,
      it means to send response immediately. */
    struct RTINtpTime responseDelayMin;
    /*e mutable. The max delay between the time writer receives some message
      from reader and the time writer responds to that message. It must be >= 
      responseDelayMin. */
    struct RTINtpTime responseDelayMax;
    /*e mutable.  The window during which heartbeats that would trigger 
    redundant NACKs are ignored. */
    struct RTINtpTime nackSuppressionDuration;
    /*e mutable. How often a piggyback heartbeat should be inserted. The 
      acceptable range is [0, parent.parameter.sendQueueSize]. If it's 0, no
      piggyback heartbeat will be inserted. Otherwise, for every 
      int(parent.parameter.sendQueueSize/heartbeatPerSendQueue) number of 
      issues, a piggyback heartbeat will be inserted.
    */
    int heartbeatPerSendQueue;
    /*e mutable. Maximum of bytes to send per nack request. If nack asks for
      more repair samples than those fit into the bytes limit, write will wait
      for the next nack to send the rest samples.
     */
    int maxBytesPerNackResponse;
    /*e immutable. If the pushMode == FALSE, everytime a writer writes an issue,
      the issue is simply put into the queue, but does not get sent. Otherwise,
      the issue will be sent out. */
    RTIBool pushMode;
    /*e mutable. The min delay between two pushs of the same data. 
      Not used yet. */
    struct RTINtpTime pushDelayMin;
    /*e mutable.The min delay between two pushs of the same data. 
      Not used yet. */
    struct RTINtpTime pushDelayMax;
    /*e mutable. The max number of push retries. Not used yet. */
    int pushAttemptMax;
};


/*e \ingroup PRESPsServiceModule */
#define PRES_PS_SR_WRITER_PROPERTY_DEFAULT {          \
    PRES_PS_WRITER_PROPERTY_DEFAULT, /* parent */     \
    0, /* lowWaterMark */                             \
    1, /* highWaterMark */                            \
    {1, 0}, /* repeatAnnouncePeriodNorm */            \
    PRES_PS_SR_WRITER_PROPERTY_REPEAT_ANNOUNCE_PERIOD_FAST_INVALID, \
    {1, 0}, /* lateJoinerAnnouncePeriod */  \
    10, /* maxRetries */                              \
    {0, 0}, /* responseDelayMin */                    \
    {0, 0}, /* responseDelayMax */                    \
    {0, 0}, /* nackSuppressionDuration */             \
    1, /* heartbeatPerSendQueue */                    \
    9216, /* maxBytesPerNackResponse */               \
    RTI_TRUE, /* pushMode */                          \
    {0, 0}, /* pushDelayMin */                        \
    {0, 0}, /* pushDelayMax */                        \
    1 /* pushAttemptMax */                            \
}

struct REDAInlineList;

struct PRESPsAnonWriterProperty {
    /*e parent property. */
    struct PRESPsWriterProperty parent;
    /*e immutable. The remote reader's oid to whom the writer will send data,
      and from whom the writer expects to receive response. */
    MIGRtpsObjectId remoteReaderOid;
    /*e mutable. The broadcast rate for broadcaster or transponder. Must > 0 */
    struct RTINtpTime broadcastPeriod;
    /*e mutable. The response delay when a transponder or responder receive
      request from remote reader. Must >= 0. */
    struct RTINtpTime nackResponseDelay;
    /*e where to broadcast to; translates to the peer list in disc */
    struct REDAInlineList* destinations;
};


/*e \ingroup PRESPsServiceModule */
#define PRES_PS_ANON_WRITER_PROPERTY_DEFAULT {           \
    PRES_PS_WRITER_PROPERTY_DEFAULT, /* parent */        \
    MIG_RTPS_OBJECT_ID_UNKNOWN, /* remoteReaderOid */ \
    {0, 0}, /* broadcastPeriod */                     \
    {0, 0}, /* nackResponseDelay */                   \
    NULL \
}

typedef enum {
    PRES_PS_SERVICE_READER_PROPERTY_NORM = 0x01,
    PRES_PS_SERVICE_READER_PROPERTY_ANON = 0x02
} PRESPsServiceReaderKind;

struct PRESPsReaderResourceLimits {
    /*e immutable. The maximum allowable number of samples per remote writer. */
    int maxSamplesPerRemoteWriter;

    /*e immutable. Number of remote writer queues. */
    struct REDAFastBufferPoolGrowthProperty remoteWriterCount;

    /*e immutable. Control growth of instance info. */
    struct REDAFastBufferPoolGrowthProperty infoCount;

    /*e immutable. Control growth of remote writers per instance. */
    struct REDAFastBufferPoolGrowthProperty remoteWriterCountPerInstance;

    /* immutable. Control growth of outstanding reads */
    struct REDAFastBufferPoolGrowthProperty outstandingReadCount;

    /*e immutable. The maximum number samples that can be returned from
       read/take. Must be a finite positive number. */
    int maxSamplesPerRead;

    /*e immutable. Determines whether the reader supports receiving fragments samples.
    */
    RTIBool disableFragmentationSupport;

    /*e immutable. The number of fragmented samples for all remote writers.
       Completely independent from maxSamples (full samples), etc.
    */
    struct REDAFastBufferPoolGrowthProperty fragmentedSamples;

    /*e immutable. The maximum number of fragmented samples for a given remote writer.
       Completely independent from maxSamples (full samples), etc.
    */
    int maxFragmentedSamplesPerRemoteWriter;

    /*e immutable. The maximum number of fragments for any samples.
    */
    int maxFragmentsPerSample;

    /*e immutable. Pre-allocation means buffers are allocated to max size (can be
       wasteful), but with dynamic allocation the correct size can be allocated
       (can be undeterministic).
    */
    RTIBool dynamicallyAllocateFragmentedSamples;
};


/*e \ingroup PRESPsServiceModule */
#define PRES_PS_READER_RESOURCE_LIMITS_DEFAULT {              \
    REDA_FAST_BUFFER_POOL_UNLIMITED, /* maxSamplesPerRemoteWriter */ \
    /* remoteWriterCount */ \
    {1, REDA_FAST_BUFFER_POOL_UNLIMITED, REDA_FAST_BUFFER_POOL_UNLIMITED}, \
    /* infoCount */ \
    {32, REDA_FAST_BUFFER_POOL_UNLIMITED, REDA_FAST_BUFFER_POOL_UNLIMITED}, \
    /* remoteWriterCountPerInstance */ \
    {1, REDA_FAST_BUFFER_POOL_UNLIMITED, REDA_FAST_BUFFER_POOL_UNLIMITED}, \
    /* outstandingReadCount */ \
    {1, REDA_FAST_BUFFER_POOL_UNLIMITED, REDA_FAST_BUFFER_POOL_UNLIMITED}, \
    1024, /* maxSamplesPerRead: should NEVER be unlimited */ \
    RTI_TRUE, /* disableFragmentationSupport */ \
    {4, 1024, REDA_FAST_BUFFER_POOL_UNLIMITED }, /* fragmentedSamples: */ \
    256, /* maxFragmentedSamplesPerRemoteWriter: */ \
    512, /* maxFragmentsPerSample: */ \
    RTI_FALSE /* dynamicallyAllocateFragmentedSamples: */ \
       }

struct PRESPsReaderProperty {
    /*e immutable parent property */
    struct PRESLocalEndpointProperty parent;
    /*e partly mutable */
    struct PRESPsSubscriptionParameter parameter;
    /*e immutable encodes the kind of reader.
      Can't be PRESPsServiceReaderKind because we need to support bit operation
    */
    /*i For DDS, leave it as default, i.e., NORM */
    PRESPsServiceReaderKind readerKindMask;
    /*e immutable */
    struct PRESHistoryQosPolicy history;
    /*e immutable */
    struct PRESResourceLimitsQosPolicy resourceLimits;
    /*e immutable */
    struct PRESPsReaderResourceLimits readerResourceLimits;
    /*e mutable, unsupported */
    struct PRESReaderDataLifecycleQosPolicy readerDataLifecycle;
    /*e immutable. If true, onDataOnReaders callback in group/service listener
      will be skipped when we receive new data. */
    /*i For DDS, leave it as default, i.e., RTI_FALSE */
    RTIBool skipOnDataOnReaders;
    /*i immutable. State whether we need to match with local writers.
      For DDS, leave it as default, i.e., RTI_TRUE */
    RTIBool matchWithLocal;
    /*i immutable. Data pool passed to the queue. Optional.
      If this is not NULL, createPool and destroyPool on the type plugin
      interface will not be called when the reader is created/destroyed.
      Must remain valid throughout the life cycle of the reader.
     */
    void *dataPool;
    /*i immutable. Serialize option passed to the queue. Optional. */
    void *serializeOption;
    /*i Flags whether reader expects inlineQoS*/
    RTIBool expectsInlineQos;
};


/*e \ingroup PRESPsServiceModule */
#define PRES_PS_READER_PROPERTY_DEFAULT {                     \
    PRES_LOCAL_ENDPOINT_PROPERTY_DEFAULT, /* parent */        \
    PRES_PS_SUBSCRIPTION_PARAMETER_DEFAULT, /* parameter */   \
    PRES_PS_SERVICE_READER_PROPERTY_NORM, /* bitmap */        \
    {PRES_KEEP_LAST_HISTORY_QOS,PRES_NONE_REFILTER_QOS,1}, /* history */\
    { /* resourceLimits */ \
      {1, 4, REDA_FAST_BUFFER_POOL_UNLIMITED}, /* sampleCount */ \
      {1, 4, REDA_FAST_BUFFER_POOL_UNLIMITED}, /* instanceCount */ \
      4 /* maxSamplesPerInstance */ \
    }, \
    PRES_PS_READER_RESOURCE_LIMITS_DEFAULT,                   \
    {RTI_NTP_TIME_MAX, RTI_NTP_TIME_MAX}, /* readerDataLifecycle */  \
    RTI_FALSE, /* skipOnDataOnReaders */                      \
    RTI_TRUE, /* matchWithLocal */                            \
    NULL, /* dataPool */                                      \
    NULL, /* serializeOption */                                \
    RTI_FALSE /* expectsInlineQos */                        \
}

struct PRESPsBeReaderProperty {
    /*e Partially mutable superclass instance. */
    struct PRESPsReaderProperty parent;
};


/*e \ingroup PRESPsServiceModule
 * Default property values for a best effort reader.
 */
#define PRES_PS_BE_READER_PROPERTY_DEFAULT {         \
    PRES_PS_READER_PROPERTY_DEFAULT, /* parent */    \
}

struct PRESPsSrReaderProperty {
    /*e Partially mutable superclass instance. */
    struct PRESPsReaderProperty parent;
    /*e mutable. Min delay between sending an ACk and receiving a HB. */
    struct RTINtpTime ackDelayMin;
    /*e mutable. Max delay between sending an ACk and receiving a HB. */
    struct RTINtpTime ackDelayMax;
    /*e mutable. The maximum of samples (received or not) to put into one nack
      message.<br>
      TODO: not used yet.
     */
    int maxSamplesPerNack;
    /*e mutable. The rate to send periodic ACKs. If set to ZERO, no periodic
      ACK gets sent. Currently just left as default. It is used in
      commend but not really tested. */
    struct RTINtpTime nackPeriod;
    /*e mutable. The max retries of ACKs before deactivating a remote writer,
      if nothing received from that remote writer during the retry period.
      Currently left as default. It is used in commend but not really tested.
    */
    int nackRetriesMax;

    /*e mutable. To avoid responding to too frequent HBs. */
    struct RTINtpTime heartbeatSuppressionDuration;
};


/*e \ingroup PRESPsServiceModule
 * Default property values for a reliable reader.
 */
#define PRES_PS_SR_READER_PROPERTY_DEFAULT {      \
    PRES_PS_READER_PROPERTY_DEFAULT, /* parent */ \
    {0, 0}, /* ackDelayMin */                     \
    {0, 0}, /* ackDelayMax */                     \
    256, /* maxSamplesPerNack */                  \
    {0, 0}, /* nackPeriod */                      \
    1, /* maxNackRetries */                       \
    {0, 0x10000000} /* heartbeatSupressionDuration */  \
}

struct PRESPsAnonReaderProperty {
    /*e parent property */
    struct PRESPsSrReaderProperty parent;
    /*e The oid of the remote writer from which the anon reader expects to
      receive data. */
    MIGRtpsObjectId remoteWriterOid;
};


/*e \ingroup PRESPsServiceModule */
#define PRES_PS_ANON_READER_PROPERTY_DEFAULT {          \
    PRES_PS_SR_READER_PROPERTY_DEFAULT, /* parent */    \
    MIG_RTPS_OBJECT_ID_UNKNOWN /* remoteWriterOid */ \
}

struct PRESPsRemoteWriterProperty {
    /*e The properties inherited from our supertype. */
    struct PRESRemoteEndpointProperty parent;
    /*e The parameter values. */
    struct PRESPsPublicationParameter parameter;
    /*e The highest sequence number the remote writer has. Set to UNKNOWN if 
      unknown. */
    struct REDASequenceNumber maxAvailableSn;
};


/*e \ingroup PRESPsServiceModule
 * The default property values of a remote writer.
 */
#define PRES_PS_REMOTE_WRITER_PROPERTY_DEFAULT {                  \
    PRES_REMOTE_ENDPOINT_PROPERTY_DEFAULT, /* parent */ \
    PRES_PS_PUBLICATION_PARAMETER_DEFAULT, /* parameter */ \
     REDA_SEQUENCE_NUMBER_UNKNOWN /* maxAvailableSn */          \
}

struct PRESPsRemoteReaderProperty {
    /*e Superclass instance. */
    struct PRESRemoteEndpointProperty parent;
    /*e Parameter. */
    struct PRESPsSubscriptionParameter parameter;
};


/*e \ingroup PRESPsServiceModule
 * The default property values of a remote reader.
 */
#define PRES_PS_REMOTE_READER_PROPERTY_DEFAULT {                \
    PRES_REMOTE_ENDPOINT_PROPERTY_DEFAULT, /* parent */         \
    PRES_PS_SUBSCRIPTION_PARAMETER_DEFAULT /* parameter */     \
}

struct PRESPsReaderListener;

struct REDAWorker;

typedef void
(*PRESPsReaderListenerOnRequestedDeadlineMissedCallback)(
    const struct PRESPsReaderListener *listener,
    struct PRESPsReader *reader,
    const struct PRESRequestedDeadlineMissedStatus *status,
    struct REDAWorker *worker);

typedef void
(*PRESPsReaderListenerOnRequestedIncompatibleQosCallback)(
    const struct PRESPsReaderListener *listener,
    struct PRESPsReader *reader,
    const struct PRESRequestedIncompatibleQosStatus *status,
    struct REDAWorker *worker);

typedef void
(*PRESPsReaderListenerOnSampleRejectedCallback)(
    const struct PRESPsReaderListener *listener,
    struct PRESPsReader *reader,
    const struct PRESSampleRejectedStatus *status,
    struct REDAWorker *worker);

typedef void
(*PRESPsReaderListenerOnLivelinessChangedCallback)(
    const struct PRESPsReaderListener *listener,
    struct PRESPsReader *reader,
    const struct PRESLivelinessChangedStatus *status,
    struct REDAWorker *worker);

typedef void
(*PRESPsReaderListenerOnSampleLostCallback)(
    const struct PRESPsReaderListener *listener,
    struct PRESPsReader *reader,
    const struct PRESSampleLostStatus *status,
    struct REDAWorker *worker);

typedef void
(*PRESPsReaderListenerOnLivelinessUpdatedCallback)(
    const struct PRESPsReaderListener *listener,
    struct PRESPsReader *reader,
    const struct PRESLivelinessUpdatedStatus *status,
    struct REDAWorker *worker);

typedef void
(*PRESPsReaderListenerOnSubscriptionMatchCallback)(
    const struct PRESPsReaderListener *listener,
    struct PRESPsReader *reader,
    const struct PRESSubscriptionMatchStatus *status,
    struct REDAWorker *worker);

typedef void
(*PRESPsReaderListenerOnDataAvailableCallback)(
    const struct PRESPsReaderListener *listener,
    struct PRESPsReader *reader,
    struct REDAWorker *worker);

struct PRESPsReaderListener {
    PRESPsReaderListenerOnRequestedDeadlineMissedCallback
        onRequestedDeadlineMissed;
    PRESPsReaderListenerOnRequestedIncompatibleQosCallback
        onRequestedIncompatibleQos;
    PRESPsReaderListenerOnSampleRejectedCallback onSampleRejected;
    PRESPsReaderListenerOnLivelinessChangedCallback onLivelinessChanged;
    PRESPsReaderListenerOnSampleLostCallback onSampleLost;
    PRESPsReaderListenerOnSubscriptionMatchCallback onSubscriptionMatch;
    PRESPsReaderListenerOnDataAvailableCallback onDataAvailable;
    /* For discovery usage only for now */
    PRESPsReaderListenerOnLivelinessUpdatedCallback onLivelinessUpdated;
};

struct PRESPsWriterListener;

typedef void
(*PRESPsWriterListenerOnOfferedDeadlineMissedCallback)(
    const struct PRESPsWriterListener *listener,
    struct PRESPsWriter *writer, 
    const struct PRESOfferedDeadlineMissedStatus *status,
    struct REDAWorker *worker);

typedef void
(*PRESPsWriterListenerOnOfferedIncompatibleQosCallback)(
    const struct PRESPsWriterListener *listener,
    struct PRESPsWriter *writer,
    const struct PRESOfferedIncompatibleQosStatus *status,
    struct REDAWorker *worker);

typedef void
(*PRESPsWriterListenerOnLivelinessLostCallback)(
    const struct PRESPsWriterListener *listener,
    struct PRESPsWriter *writer,
    const struct PRESLivelinessLostStatus *status,
    struct REDAWorker *worker);

typedef void
(*PRESPsWriterListenerOnLivelinessChangedCallback)(
    const struct PRESPsWriterListener *listener,
    struct PRESPsWriter *writer,
    const struct PRESLivelinessChangedStatus *status,
    struct REDAWorker *worker);

typedef void
(*PRESPsWriterListenerOnPublicationMatchCallback)(
    const struct PRESPsWriterListener *listener,
    struct PRESPsWriter *writer,
    const struct PRESPublicationMatchStatus *status,
    struct REDAWorker *worker);

typedef void
(*PRESPsWriterListenerOnPublicationReliableQueueCallback)(
    const struct PRESPsWriterListener *listener,
    struct PRESPsWriter *writer,
    const struct PRESPublicationReliableQueueStatus *status,
    struct REDAWorker *worker);

struct PRESPsWriterListener {
    PRESPsWriterListenerOnOfferedDeadlineMissedCallback
    onOfferedDeadlineMissed;
    PRESPsWriterListenerOnOfferedIncompatibleQosCallback
    onOfferedIncompatibleQos;
    PRESPsWriterListenerOnLivelinessLostCallback onLivelinessLost;
    PRESPsWriterListenerOnLivelinessChangedCallback onLivelinessChanged;
    PRESPsWriterListenerOnPublicationMatchCallback onPublicationMatch;
    PRESPsWriterListenerOnPublicationReliableQueueCallback
    onPublicationReliableQueue;
};


#define PRESPsWriterGroup PRESGroup
#define PRESPsReaderGroup PRESGroup

struct PRESPsWriterGroupProperty {
    /*e immutable */
    struct PRESGroupProperty parent;
    /*e immutable */
    struct PRESPresentationQosPolicy presentation;
    /*e mutable */
    struct PRESPartitionQosPolicy partition;
    /*e mutable */
    struct PRESGroupDataQosPolicy groupData;
    /*e immutable */
    struct PRESAsynchronousPublisherQosPolicy asynchronousPublisher;
    /*e mutable */
    struct PRESEntityFactoryQosPolicy entityFactory;
    /*e immutable

        whether this group needs to be destroyed when deleteContainedEntities
        is called on the factory
    */
    RTIBool explicitDestroyOnly;
};


/*e \ingroup PRESPsWriterGroupModule
 * Default values for PRESPsWriterGroupProperty.
 */
#define PRES_PS_WRITER_GROUP_PROPERTY_DEFAULT {                      \
    PRES_GROUP_PROPERTY_DEFAULT,                                     \
    {PRES_INSTANCE_PRESENTATION_QOS, RTI_FALSE, RTI_FALSE},          \
    {{0, 0, NULL}},                                                  \
    {{0, 0, NULL}},                                                  \
    {RTI_FALSE, /* disabled */ \
     RTI_OSAPI_THREAD_PRIORITY_DEFAULT, /* priority */ \
     RTI_OSAPI_THREAD_STACK_SIZE_DEFAULT, /* stackSize */ \
     (RTI_OSAPI_THREAD_OPTION_PRIORITY_ENFORCE | RTI_OSAPI_THREAD_OPTION_STDIO) /* options */ \
    }, \
    {RTI_TRUE},                                                      \
    RTI_FALSE                                                        }


struct PRESPsReaderGroupProperty {
    /*e immutable */
    struct PRESGroupProperty parent;
    /*e immutable */
    struct PRESPresentationQosPolicy presentation;
    /*e mutable */
    struct PRESPartitionQosPolicy partition;
    /*e mutable */
    struct PRESGroupDataQosPolicy groupData;
    /*e mutable */
    struct PRESEntityFactoryQosPolicy entityFactory;
    /*e immutable */
    RTIBool autoDestroyByFactory;
    /*e immutable

        whether this group needs to be destroyed when deleteContainedEntities
        is called on the factory
    */
    RTIBool explicitDestroyOnly;
};


/*e \ingroup PRESPsReaderGroupModule
 * Default values for PRESPsReaderGroupProperty.
 */
#define PRES_PS_READER_GROUP_PROPERTY_DEFAULT {                      \
    PRES_GROUP_PROPERTY_DEFAULT,                                     \
    {PRES_INSTANCE_PRESENTATION_QOS, RTI_FALSE, RTI_FALSE},          \
    {{0, 0, NULL}},                                                    \
    {{0, 0, NULL}},                                                  \
    {RTI_TRUE},                                                      \
    RTI_FALSE                                                        }

struct PRESPsReaderGroupListener;

typedef void
(*PRESPsReaderGroupListenerOnDataOnReadersCallback)(
    const struct PRESPsReaderGroupListener *listener,
    struct PRESPsReaderGroup *readerGroup,
    struct REDAWorker *worker);

struct PRESPsReaderGroupListener {
    struct PRESPsReaderListener readerListener;
    PRESPsReaderGroupListenerOnDataOnReadersCallback onDataOnReaders;
};

struct PRESPsWriterGroupListener {
    struct PRESPsWriterListener writerListener;
};

struct PRESPsServiceEntityFinalizeListener;

typedef void
(*PRESPsServiceEntityFinalizeListenerOnBeforeReaderFinalizeFnc)(
    void* readerFinalizeParam,
    void* userObject, struct REDAWorker *worker);

typedef void
(*PRESPsServiceEntityFinalizeListenerOnBeforeWriterFinalizeFnc)(
    void* writerFinalizeParam,
    void* userObject, struct REDAWorker *worker);

typedef void
(*PRESPsServiceEntityFinalizeListenerOnBeforeReaderGroupFinalizeFnc)(
    void* readerGroupFinalizeParam,
    void* userObject, struct REDAWorker *worker);

typedef void
(*PRESPsServiceEntityFinalizeListenerOnBeforeWriterGroupFinalizeFnc)(
    void* writerGroupFinalizeParam,
    void* userObject, struct REDAWorker *worker);

typedef void
(*PRESPsServiceEntityFinalizeListenerOnBeforeReadConditionFinalizeFnc)(
    void* readConditionFinalizeParam,
    void* userObject, struct REDAWorker *worker);

struct PRESPsServiceEntityFinalizeListener {
    PRESPsServiceEntityFinalizeListenerOnBeforeReaderFinalizeFnc
        onBeforeReaderFinalizeFnc;
    void* readerFinalizeParam;
    PRESPsServiceEntityFinalizeListenerOnBeforeWriterFinalizeFnc
        onBeforeWriterFinalizeFnc;
    void* writerFinalizeParam;

    PRESPsServiceEntityFinalizeListenerOnBeforeReaderGroupFinalizeFnc
        onBeforeReaderGroupFinalizeFnc;
    void* readerGroupFinalizeParam;
    PRESPsServiceEntityFinalizeListenerOnBeforeWriterGroupFinalizeFnc
        onBeforeWriterGroupFinalizeFnc;
    void* writerGroupFinalizeParam;

    PRESPsServiceEntityFinalizeListenerOnBeforeReadConditionFinalizeFnc
        onBeforeReadConditionFinalizeFnc;
    void* readConditionFinalizeParam;
};

struct PRESPsServiceListener {
    struct PRESPsReaderGroupListener readerGroupListener;
    struct PRESPsWriterGroupListener writerGroupListener;
};

struct PRESPsServiceProperty {
    /*e various table properties */
    struct REDATableProperty writerTable, readerTable,
 	remoteWriterTable, remoteReaderTable,
	matchingRemoteWriterTable, matchingRemoteReaderTable, 
        writerGroupTable, readerGroupTable;

    struct REDAFastBufferPoolGrowthProperty readConditionPool;

    /*e Destination fan-out max */
    int destinationFanoutMax;

    /*e reader group group data fast buffer setup */
    int readerGroupGroupDataMaximumLength;
    /*e writer group group data fast buffer setup */
    int writerGroupGroupDataMaximumLength;
    /*e reader user data fast buffer setup */
    int readerUserDataMaximumLength;
    /*e writer user data fast buffer setup */
    int writerUserDataMaximumLength;
    /*e topic data buffer setup */
    int topicDataMaximumLength;
    /*e partition table setup
      Maximum cumulative length of all the partition name strings,
      including comma and terminating null.
      This value cannot be greater then
      PRES_PS_PARTITION_MAXIMUM_CUMULATIVE_LENGTH_LIMIT */
    int partitionMaximumCumulativeLength;
    /*e filter property setup
      Maximum length of the filter property */
    int contentFilterPropertyMaxLength;
    /*e Size of user object to be stored in writer group */
    int writerGroupUserObjectSize;
    /*e Alignment user object to be stored in writer group */
    int writerGroupUserObjectAlignment;
    /*e Size of user object to be stored in writer */
    int writerUserObjectSize;
    /*e Alignment of user object to be stored in writer */
    int writerUserObjectAlignment;    
    /*e Size of user object to be stored in reader group */
    int readerGroupUserObjectSize;
    /*e Alignment user object to be stored in reader group */
    int readerGroupUserObjectAlignment;
    /*e Size of user object to be stored in reader */
    int readerUserObjectSize;
    /*e Alignment of user object to be stored in reader */
    int readerUserObjectAlignment;    
    /*e Size of user object to be stored in read condition */
    int readConditionUserObjectSize;
    /*e Alignment user object to be stored in read condition */
    int readConditionUserObjectAlignment;

    /*e The maximum rate at which to check for liveliness of remote writers.
        The smaller value between this and the minimum liveiness lease
	duration among all local readers will be used as the actual purge
	period.
     */
    struct RTINtpTime maxPurgePeriod;

    /*e Determine if the default partition element is treated as a special
        value that matches any partition */
    RTIBool defaultPartitionMatchAll;

    /*e Determine if it is allowed for an entity to not belonging to any
        physical partition */
    RTIBool allowNoPartition;

    /*e Determines whether resources and logic for gathering statistics
    are enabled. */
    RTIBool gatherStatistics;

    /*e Maximum number of properties associated to a data writer*/
    int writerMaxPropertyLength;
    /*e Maximum string length of the properties associated to a data writer.
        The string length is defined as the cumulative length in bytes 
        (not including NULL terminated char) of all 
        the pair (name,value) associated to the writer properties */
    int writerMaxPropertyStringLength;
    /*e Maximum number of properties associated to a data reader*/
    int readerMaxPropertyLength;
    /*e Maximum string length of the properties associated to a data reader.
        The string length is defined as the cumulative length in bytes 
        (not including NULL terminated char) of all 
        the pair (name,value) associated to the reader properties */
    int readerMaxPropertyStringLength;
};


/*e \ingroup PRESPsServiceModule
  Default value of maximum length of groupData
 */
#define PRES_PS_GROUP_DATA_MAXIMUM 256

/*e \ingroup PRESPsServiceModule
  Default value of maximum length of userData
 */
#define PRES_PS_USER_DATA_MAXIMUM 256

/*e \ingroup PRESPsServiceModule
  Default value of maximum length of property list
 */
#define PRES_PS_PROPERTY_LIST_MAXIMUM 32

/*e \ingroup PRESPsServiceModule
  Default value of maximum length of property string
 */
#define PRES_PS_PROPERTY_STRING_MAXIMUM 1024

/*e \ingroup PRESPsServiceModule
  Default value of maximum cumulative length for partition
 */
#define PRES_PS_PARTITION_MAXIMUM_CUMULATIVE_LENGTH_DEFAULT 0

/*e \ingroup PRESPsServiceModule
 * Default value of PRESPsServiceProperty instances.
 */
#define PRES_PS_SERVICE_PROPERTY_DEFAULT {                         \
 /* writerTable */                            \
    {{8,REDA_FAST_BUFFER_POOL_UNLIMITED,REDA_FAST_BUFFER_POOL_UNLIMITED}, 1},\
 /* readerTable */                            \
    {{8,REDA_FAST_BUFFER_POOL_UNLIMITED,REDA_FAST_BUFFER_POOL_UNLIMITED}, 1},\
 /* remoteWriterTable */                      \
    {{8,REDA_FAST_BUFFER_POOL_UNLIMITED,REDA_FAST_BUFFER_POOL_UNLIMITED}, 1},\
 /* remoteReaderTable */                      \
    {{8,REDA_FAST_BUFFER_POOL_UNLIMITED,REDA_FAST_BUFFER_POOL_UNLIMITED}, 1},\
 /* matchingRemoteWriterTable */              \
    {{4,REDA_FAST_BUFFER_POOL_UNLIMITED,REDA_FAST_BUFFER_POOL_UNLIMITED}, 1},\
 /* matchingRemoteReaderTable */              \
    {{4,REDA_FAST_BUFFER_POOL_UNLIMITED,REDA_FAST_BUFFER_POOL_UNLIMITED}, 1},\
 /* writerGroupTable */              \
    {{8,REDA_FAST_BUFFER_POOL_UNLIMITED,REDA_FAST_BUFFER_POOL_UNLIMITED}, 1},\
 /* readerGroupTable */              \
    {{8,REDA_FAST_BUFFER_POOL_UNLIMITED,REDA_FAST_BUFFER_POOL_UNLIMITED}, 1},\
 /* readConditionPool */              \
    {4, REDA_FAST_BUFFER_POOL_UNLIMITED,REDA_FAST_BUFFER_POOL_UNLIMITED}, \
    8, /* destinationFanoutMax */                                  \
    PRES_PS_GROUP_DATA_MAXIMUM, /* writerGroupGroupDataMaximumLength */ \
    PRES_PS_GROUP_DATA_MAXIMUM, /* readerGroupGroupDataMaximumLength */ \
    PRES_PS_USER_DATA_MAXIMUM, /* writerUserDataMaximumLength */ \
    PRES_PS_USER_DATA_MAXIMUM, /* readerUserDataMaximumLength */ \
    PRES_PARTICIPANT_TOPIC_DATA_MAXIMUM, /* topicDataMaximumLength */ \
    PRES_PS_PARTITION_MAXIMUM_CUMULATIVE_LENGTH_DEFAULT,           \
    PRES_CONTENT_FILTER_PROPERTY_LEN_MAX,                          \
    0, /* writerGroupUserObjectSize */                             \
    0, /* writerGroupUserObjectAlignment */                        \
    0, /* writerUserObjectSize */                                  \
    0, /* writerUserObjectAlignment */                             \
    0, /* readerGroupUserObjectSize */                             \
    0, /* readerGroupUserObjectAlignment */                        \
    0, /* readerUserObjectSize */                                  \
    0, /* readerUserObjectAlignment */                             \
    0, /* readConditionUserObjectSize */                           \
    0, /* readConditionUserObjectAlignment */                      \
    {60, 0}, /* maxPurgePeriod */                                  \
    RTI_FALSE, /* defaultPartitionMatchAll */                      \
    RTI_FALSE, /* allowNoPartition */                               \
    RTI_FALSE, /* gatherStatistics */                                \
    PRES_PS_PROPERTY_LIST_MAXIMUM, /* writerMaxPropertyLength */   \
    PRES_PS_PROPERTY_STRING_MAXIMUM, /* writerMaxPropertyStringLength */ \
    PRES_PS_PROPERTY_LIST_MAXIMUM, /* readerMaxPropertyLength */   \
    PRES_PS_PROPERTY_STRING_MAXIMUM  /* readerMaxPropertyStringLength */ \
}

struct PRESInlineQosExpected {
    /* DURABILITY */
    struct PRESDurabilityQosPolicy durabilityQos;
    /* PRESENTATION */
    struct PRESPresentationQosPolicy presentationQos;
    /* DEADLINE */
    struct PRESDeadlineQosPolicy deadlineQos;
    /* LATENCY_BUDGET */
    struct PRESLatencyBudgetQosPolicy latencyBudgetQos;
    /* OWNERSHIP */
    struct PRESOwnershipQosPolicy ownershipQos;
    /* OWNERSHIP_STRENGTH */    
    struct PRESOwnershipStrengthQosPolicy ownershipStrengthQos;
    /* LIVELINESS */
    struct PRESLivelinessQosPolicy livelinessQos;
    /* PARTITION */
    struct PRESPartitionQosPolicy partitionQos;
    /* RELIABILITY */
    struct PRESReliabilityQosPolicy reliablityQos;
    /* TRANPORT_PRIORITY */
    struct PRESTransportPriorityQosPolicy tranportPriorityQos;
    /* LIFESPAN */
    struct PRESLifespanQosPolicy lifespanQos;
    /* DESTINATION_ORDER */
    struct PRESDestinationOrderQosPolicy destinationOrderQos;
};


#define PRES_INLINE_QOS_EXPECTED_DEFAULT { \
PRES_PS_PUBLICATION_PARAMETER_DURABILITY_QOS_POLICY_DEFAULT,    \
PRES_PS_PUBLICATION_PARAMETER_PRESENTATION_QOS_POLICY_DEFAULT,  \
PRES_PS_PUBLICATION_PARAMETER_DEADLINE_QOS_POLICY_DEFAULT,      \
PRES_PS_PUBLICATION_PARAMETER_LATENCY_BUDGET_QOS_POLICY_DEFAULT,      \
PRES_PS_PUBLICATION_PARAMETER_OWNERSHIP_QOS_POLICY_DEFAULT, \
{PRES_PS_PUBLICATION_PARAMETER_STRENGTH_DEFAULT},    \
PRES_PS_PUBLICATION_PARAMETER_LIVELINESS_QOS_POLICY_DEFAULT,    \
PRES_PS_PUBLICATION_PARAMETER_PARTITION_QOS_POLICY_DEFAULT, \
PRES_PS_PUBLICATION_PARAMETER_RELIABILITY_QOS_POLICY_DEFAULT,   \
{0}, /* transport priority */ \
PRES_PS_PUBLICATION_PARAMETER_LIFESPAN_QOS_POLICY_DEFAULT,  \
PRES_PS_PUBLICATION_PARAMETER_DESTINATION_ORDER_QOS_POLICY_DEFAULT \
}

struct PRESParticipant;

struct PRESPsService;

struct PRESLoanedSampleInfoListener;

extern PRESDllExport struct PRESPsService *
PRESPsService_new(struct PRESParticipant *participant,
                  struct RTINetioConfigurator* configuratorIn,
		  struct PRESPsServiceProperty *property, 
		  struct REDAWorkerFactory *workerFactory,
		  struct REDADatabase *db, 
		  struct RTIClock *clock, struct REDAExclusiveArea *tableEa,
		  struct REDAExclusiveArea *remoteRecordEa,
		  struct REDAExclusiveArea *blockingWriteEa,
		  const struct PRESPsServiceEntityFinalizeListener
		  *finalizeListener,
		  const struct PRESLoanedSampleInfoListener *sampleInfoListener,
		  const struct PRESPsServiceListener *listener,
		  PRESStatusKindMask listenerMask,
		  struct REDAWorker *worker);

extern PRESDllExport void
PRESPsService_getProperty(struct PRESPsService *me,
                          struct PRESPsServiceProperty *property,
                          struct REDAWorker *worker);

extern PRESDllExport
RTIBool PRESPsService_getRemoteReaderProperty(
    struct PRESPsService* me, int *failReason,
    struct PRESPsRemoteReaderProperty *property,
    const struct MIGRtpsGuid *localWriterGuid,
    const struct MIGRtpsGuid *remoteReaderGuid,
    struct REDAWorker* worker);

extern PRESDllExport
RTIBool PRESPsService_getRemoteWriterProperty(
    struct PRESPsService* me, int *failReason,
    struct PRESPsRemoteWriterProperty *property,
    const struct MIGRtpsGuid *localReaderGuid,
    const struct MIGRtpsGuid *remoteWriterGuid,
    struct REDAWorker* worker);

extern PRESDllExport
int PRESPsService_getUserGroupCount(struct PRESPsService *service,
				    MIGRtpsRWType type);

extern PRESDllExport
RTIBool PRESPsService_lockAllGroups(struct PRESPsService *service,
				    int *failReason,
				    MIGRtpsRWType type,
				    struct REDAWorker *worker);

extern PRESDllExport
RTIBool PRESPsService_unlockAllGroups(struct PRESPsService *service,
				      int *failReason,
				      MIGRtpsRWType type,
				      struct REDAWorker *worker);


#define PRESPsServiceIterator REDACursor

extern PRESDllExport
struct PRESPsServiceIterator *
PRESPsService_getIterator(struct PRESPsService *service,
			  int *failReason,
			  MIGRtpsRWType type,
			  struct REDAWorker *worker);

extern PRESDllExport
void PRESPsService_returnIterator(struct PRESPsService *me,
				  struct PRESPsServiceIterator *iter);

extern PRESDllExport
struct PRESGroup* PRESPsService_getNextGroup(
    struct PRESPsService *me,
    int *failReason,
    struct PRESPsServiceIterator *iter,
    PRESGroupSuffix groupSuffix,
    struct REDAWorker *worker);


#define PRESRemoteWriterIterator REDACursor

extern PRESDllExport
RTIBool PRESPsService_beginGetRemoteWriters(
    struct PRESPsService *self,
    struct PRESRemoteWriterIterator ** iter,
    RTI_INT32 *maxRemoteWriters,
    struct REDAWorker *worker); 

extern PRESDllExport                                   
RTIBool PRESPsService_endGetRemoteWriters(
    struct PRESPsService *self,
    struct PRESRemoteWriterIterator * iter,
    struct REDAWorker *worker); 

extern PRESDllExport
RTIBool PRESPsService_getNextRemoteWriter(
    struct PRESPsService *self,
    int *failReason,
    RTIBool includeLocalEndpoint,
    struct PRESRemoteWriterIterator *iter,
    struct PRESInstanceHandle *handle,
    struct REDAWorker *worker); 


#define PRESRemoteReaderIterator REDACursor

extern PRESDllExport
RTIBool PRESPsService_beginGetRemoteReaders(
    struct PRESPsService *self,
    struct PRESRemoteReaderIterator ** iter,
    RTI_INT32 *maxRemoteReaders,
    struct REDAWorker *worker); 

extern PRESDllExport                                   
RTIBool PRESPsService_endGetRemoteReaders(
    struct PRESPsService *self,
    struct PRESRemoteReaderIterator * iter,
    struct REDAWorker *worker); 

extern PRESDllExport
RTIBool PRESPsService_getNextRemoteReader(
    struct PRESPsService *self,
    int *failReason,
    RTIBool includeLocalEndpoint,
    struct PRESRemoteReaderIterator *iter,
    struct PRESInstanceHandle *handle,
    struct REDAWorker *worker); 

struct PRESPsWriterStatisticsListener;

struct PRESPsReaderStatisticsListener;

typedef void
(*PRESPsWriterStatisticsListenerOnMatchedReaderStatisticsRequestCallback)
(struct PRESPsWriterStatisticsListener *presStatsListener,                                                                    
 struct PRESPsWriter *presWriter,
 struct PRESPsWriterMatchedReaderStatistics *presStats,
 const struct MIGRtpsGuid *matchedReader,
 struct REDAWorker *worker);

typedef void
(*PRESPsWriterStatisticsListenerOnMatchedDestinationStatisticsRequestCallback)
(struct PRESPsWriterStatisticsListener *presStatsListener,                                                                   
 struct PRESPsWriter *presWriter,
 struct PRESPsWriterMatchedDestinationStatistics *presStats,
 const struct RTINetioLocator *matchedLocator,
 struct REDAWorker *worker);

struct PRESStatisticsListener {
    void *listener_data;
};

struct PRESPsWriterStatisticsListener {
    /* mirrors DDS_C as_listener struct, but exposed as ptr */
    struct PRESStatisticsListener as_listener;

    PRESPsWriterStatisticsListenerOnMatchedReaderStatisticsRequestCallback 
        onMatchedReaderStatisticsRequest;

    PRESPsWriterStatisticsListenerOnMatchedDestinationStatisticsRequestCallback 
        onMatchedDestinationStatisticsRequest;

};

typedef void
(*PRESPsReaderStatisticsListenerOnMatchedWriterStatisticsRequestCallback)
(struct PRESPsReaderStatisticsListener *presStatsListener,                                                                   
 struct PRESPsReader *presReader,
 struct PRESPsReaderMatchedWriterStatistics *presStats,
 const struct MIGRtpsGuid *matchedWriter,
 struct REDAWorker *worker);

struct PRESPsReaderStatisticsListener {
    struct PRESStatisticsListener as_listener;

    PRESPsReaderStatisticsListenerOnMatchedWriterStatisticsRequestCallback 
        onMatchedWriterStatisticsRequest;
};

extern PRESDllExport
RTIBool PRESPsService_registerWriterHistoryPlugin(
    struct PRESPsService *me,
    int *failReason,
    const char * pluginName,
    struct NDDS_WriterHistory_Plugin * plugin,
    struct REDAWorker *worker);

extern PRESDllExport struct NDDS_WriterHistory_Plugin * 
PRESPsService_getWriterHistoryPlugin(
    struct PRESPsService *me,
    const char * name,
    struct REDAWorker *worker);


#ifdef __cplusplus
    }	/* extern "C" */
#endif

#endif /* pres_psService_h */
